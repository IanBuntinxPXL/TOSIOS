pipeline{
    agent any
    stages{
        stage('Create Archive'){
            steps{
              sh 'echo "Removing Existing Archive (if/any)..."'
              sh 'rm -rf deploymentFile.zip'
              
              sh 'echo "Creating Archive..."'
              sh 'zip -r -q deploymentFile.zip .vscode images packages .dockerignore .editorconfig Dockerfile LICENSE docker-compose.yml package.json yarn.lock testfile.txt'
            }
        }
        
        stage('Creating Artifact'){
            steps{
              sh 'echo "Creating Artifact..."'
              archiveArtifacts 'deploymentFile.zip'
            }
        }
        
        stage('Deploy Archive'){
            steps{
                sh 'echo "Deploying Archive..."'
        		    sh 'sudo mv deploymentFile.zip /home/ubuntudesktop/Desktop/Jens_MyLoadbalancer/Archives/'
                
                sh 'echo "unzipping Archive..."'
        		    sh 'sudo unzip -o -q /home/ubuntudesktop/Desktop/Jens_MyLoadbalancer/Archives/deploymentFile.zip -d /home/ubuntudesktop/Desktop/Jens_MyLoadbalancer/TOSIOS-master'
                
                sh 'echo "Removing archive"'
                //sh 'sudo rm -rf /home/ubuntudesktop/Desktop/Jens_MyLoadbalancer/Archives/deploymentFile.zip'
                
            }
        }
    }
}
